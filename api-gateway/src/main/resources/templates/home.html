<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
</head>
<body>
<h2>Welcome, <span id="username">Loading...</span>!</h2>

<button id="logoutBtn">Logout</button>

<script>
    // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
    fetch('/me', {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json'
        },
        credentials: 'include' // ðŸ”¥ Ð´Ð¾Ð±Ð°Ð²ÑŒ ÑÑ‚Ð¾
    })

            .then(res => {
            if (res.ok) return res.json();
            else throw new Error('Not logged in');
        })
        .then(data => {
            document.getElementById('username').textContent = data.username;
        })
        .catch(() => {
            alert('You are not logged in');
            window.location.href = '/login-page';
        });

    // Logout
    document.getElementById('logoutBtn').addEventListener('click', () => {
        fetch('/logout', {
            method: 'POST',
            credentials: 'include' // ðŸ”¥ Ñ‚Ð¾Ð¶Ðµ Ð´Ð¾Ð±Ð°Ð²ÑŒ
        })
            .then(() => {
            alert('Logged out');
            window.location.href = '/login-page';
        });
    });
</script>
</body>
</html>
